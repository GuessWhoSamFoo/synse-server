server {
	listen	        5000;
	server_name	    localhost;
	charset	        utf-8;
	access_log      /logs/synse.net_access.log;
	error_log       /logs/synse.net_error.log;

	location / {
		add_header  'Access-Control-Allow-Origin' '*';
		uwsgi_pass  unix://etc/uwsgi/synse.sock;
		include     /etc/nginx/uwsgi_params;
	}

	location /graphql {
	    # TODO - rewrite this to the versioned URI; this is easy, but the
	    # tricky part is figuring out what the 'latest' api version is from here.
	    # read from ENV? from file?
	    return 404;
	}

	location ~ /synse/([1-9]*\.[1-9]*)/graphql {
	    add_header  'Access-Control-Allow-Origin' '*';
		uwsgi_pass  unix://etc/uwsgi/graphql.sock;
		include     /etc/nginx/uwsgi_params;
	}
}
